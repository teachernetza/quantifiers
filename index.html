<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Quantifiers Lab | Rators Club</title>
    
    <link rel="icon" type="image/png" href="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w128">
    <link rel="apple-touch-icon" href="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w512">
    <meta name="theme-color" content="#1A2B4C">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* ==========================================================================
           1. RATORS CLUB BRANDING & GLASSMORPHISM
           ========================================================================== */
        :root {
            --rc-navy: #1A2B4C;
            --rc-navy-dark: #0D172A;
            --rc-white: #FFFFFF;
            --rc-cyan: #06B6D4;
            --rc-emerald: #10B981;
            
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: rgba(255, 255, 255, 0.4);
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2);
            
            --text-main: #1E293B;
            --text-muted: #64748B;
            
            --sidebar-width: 280px;
            --trans: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--rc-navy-dark) 0%, var(--rc-navy) 100%);
            color: var(--text-main); line-height: 1.6; overflow-x: hidden; display: flex;
            min-height: 100vh;
        }

        h1, h2, h3 { font-family: 'Lora', serif; color: var(--rc-navy); }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--rc-navy-dark); }
        ::-webkit-scrollbar-thumb { background: var(--rc-cyan); border-radius: 4px; }

        /* ==========================================================================
           2. PANTALLA DE BIENVENIDA (GATEWAY)
           ========================================================================== */
        #gateway {
            position: fixed; inset: 0; background: var(--rc-navy); z-index: 9999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 2rem; text-align: center;
            background-image: radial-gradient(circle at top right, rgba(6, 182, 212, 0.15), transparent 40%);
        }
        
        .gateway-logo { width: 140px; height: 140px; border-radius: 50%; border: 4px solid var(--rc-cyan); margin-bottom: 2rem; overflow: hidden; box-shadow: 0 0 30px rgba(6, 182, 212, 0.3); }
        .gateway-logo img { width: 100%; height: 100%; object-fit: cover; }
        
        .gateway-title { font-family: 'Poppins'; font-size: 2.5rem; font-weight: 800; color: var(--rc-white); margin-bottom: 0.5rem; letter-spacing: 1px; }
        .gateway-sub { color: var(--rc-cyan); font-weight: 500; margin-bottom: 2.5rem; text-transform: uppercase; letter-spacing: 2px; font-size: 0.9rem; }
        
        .name-input {
            width: 100%; max-width: 350px; padding: 18px 20px; border-radius: 12px;
            border: 2px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1); text-align: center;
            font-family: 'Poppins'; font-size: 1.1rem; font-weight: 700; color: var(--rc-white);
            transition: var(--trans); margin-bottom: 20px; outline: none; backdrop-filter: blur(10px);
        }
        .name-input::placeholder { color: rgba(255,255,255,0.5); }
        .name-input:focus { border-color: var(--rc-cyan); background: rgba(255,255,255,0.2); box-shadow: 0 0 15px rgba(6, 182, 212, 0.3); }
        
        .btn-gateway {
            background: var(--rc-cyan); color: var(--rc-navy-dark); padding: 18px 40px; border-radius: 50px;
            border: none; font-size: 1.1rem; font-weight: 800; cursor: pointer; letter-spacing: 1px;
            box-shadow: 0 10px 20px rgba(6, 182, 212, 0.2); transition: 0.2s; width: 100%; max-width: 350px;
        }
        .btn-gateway:hover { transform: translateY(-2px); box-shadow: 0 15px 25px rgba(6, 182, 212, 0.4); }

        /* ==========================================================================
           3. SIDEBAR (NAVEGACIÓN LATERAL)
           ========================================================================== */
        .sidebar {
            width: var(--sidebar-width); height: 100vh; background: rgba(13, 23, 42, 0.6);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255,255,255,0.1);
            color: var(--rc-white); position: fixed; top: 0; left: 0; z-index: 1000;
            display: flex; flex-direction: column; transition: transform var(--trans);
        }

        .sidebar-header { padding: 2.5rem 1.5rem 1.5rem; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .rc-logo-mini { width: 80px; height: 80px; margin: 0 auto 1rem; border-radius: 50%; border: 2px solid var(--rc-cyan); overflow: hidden; background: var(--rc-white); }
        .rc-logo-mini img { width: 100%; height: 100%; object-fit: cover; }
        .rc-title { font-size: 1.2rem; font-weight: 800; letter-spacing: 1px; color: var(--rc-white); }
        .rc-subtitle { font-size: 0.8rem; color: var(--rc-cyan); text-transform: uppercase; letter-spacing: 1px; }

        .nav-menu { padding: 2rem 1rem; flex: 1; display: flex; flex-direction: column; gap: 8px; }
        
        .nav-link {
            width: 100%; padding: 16px 20px; border-radius: 12px; background: transparent;
            border: none; color: #94A3B8; text-align: left; font-size: 1rem; font-weight: 500;
            cursor: pointer; transition: var(--trans); display: flex; align-items: center; gap: 15px;
        }
        .nav-link i { font-size: 1.2rem; width: 24px; text-align: center; }
        .nav-link:hover { background: rgba(255,255,255,0.05); color: var(--rc-white); transform: translateX(5px); }
        .nav-link.active { background: var(--rc-cyan); color: var(--rc-navy-dark); font-weight: 700; box-shadow: 0 4px 15px rgba(6, 182, 212, 0.3); transform: translateX(5px); }

        /* ==========================================================================
           4. MAIN CONTENT & RESPONSIVE
           ========================================================================== */
        .main-wrapper { margin-left: var(--sidebar-width); width: calc(100% - var(--sidebar-width)); min-height: 100vh; display: flex; flex-direction: column; transition: var(--trans); position: relative; }
        
        .mobile-header { display: none; background: rgba(13, 23, 42, 0.8); backdrop-filter: blur(10px); padding: 15px 20px; color: var(--rc-white); align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 900; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .btn-menu { background: transparent; border: none; color: var(--rc-cyan); font-size: 1.5rem; cursor: pointer; }

        .content-container { padding: 3rem 2rem; max-width: 950px; margin: 0 auto; width: 100%; flex: 1; }
        
        .sidebar-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 999; display: none; opacity: 0; transition: opacity var(--trans); backdrop-filter: blur(3px); }

        @media (max-width: 992px) {
            .sidebar { transform: translateX(-100%); }
            .sidebar.open { transform: translateX(0); }
            .main-wrapper { margin-left: 0; width: 100%; }
            .mobile-header { display: flex; }
            .sidebar-overlay.active { display: block; opacity: 1; }
            .content-container { padding: 2rem 1rem; }
        }

        /* ==========================================================================
           5. GLASSMORPHISM CARDS & THEORY STYLES
           ========================================================================== */
        .view-section { display: none; animation: fadeIn 0.5s ease forwards; opacity: 0; }
        .view-section.active { display: block; }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } from { opacity: 0; transform: translateY(15px); } }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: var(--glass-shadow);
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        /* Reflejo decorativo del cristal */
        .glass-card::before { content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%; background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%); transform: skewX(-20deg); animation: shine 6s infinite; }
        @keyframes shine { 0% { left: -100%; } 20% { left: 200%; } 100% { left: 200%; } }

        .hero-title { font-size: 2.8rem; line-height: 1.2; margin-bottom: 1rem; color: var(--rc-navy-dark); text-shadow: 1px 1px 0px white; }
        .hero-divider { width: 80px; height: 6px; background: var(--rc-cyan); border-radius: 5px; margin-bottom: 2rem; }

        .concept-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 1.5rem; }
        .concept-box { background: rgba(255,255,255,0.6); border: 1px solid rgba(255,255,255,0.8); padding: 20px; border-radius: 15px; }
        .concept-box h4 { font-family: 'Poppins'; color: var(--rc-cyan); font-weight: 800; text-transform: uppercase; margin-bottom: 10px; font-size: 1.1rem; }
        
        .formula-bar { background: var(--rc-navy-dark); color: var(--rc-cyan); font-family: monospace; font-size: 1.2rem; font-weight: 700; padding: 12px 20px; border-radius: 10px; display: inline-block; margin: 15px 0; letter-spacing: 1px; box-shadow: inset 0 2px 10px rgba(0,0,0,0.5); }

        .word-tag { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 700; color: white; margin: 0 4px 5px 0; }
        .tag-food { background: #E11D48; } /* Rose */
        .tag-tech { background: #4F46E5; } /* Indigo */

        /* ==========================================================================
           6. UNJUMBLE GAME (PRÁCTICA)
           ========================================================================== */
        .game-area { background: rgba(255,255,255,0.5); border: 2px dashed var(--rc-cyan); border-radius: 15px; padding: 20px; text-align: center; }
        
        .pool-area { min-height: 80px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 20px; padding: 15px; background: rgba(0,0,0,0.05); border-radius: 10px; }
        .answer-area { min-height: 80px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; padding: 15px; border-bottom: 3px solid var(--rc-navy); margin-bottom: 20px; }
        
        .word-chip {
            background: var(--rc-navy); color: white; padding: 10px 20px; border-radius: 8px;
            font-weight: 600; font-size: 1.1rem; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            user-select: none;
        }
        .word-chip:hover { background: var(--rc-cyan); transform: translateY(-2px); color: var(--rc-navy-dark); }
        .word-chip:active { transform: scale(0.95); }

        .btn-check-game { background: var(--rc-emerald); color: white; border: none; padding: 12px 30px; border-radius: 30px; font-weight: 700; font-size: 1.1rem; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3); }
        .btn-check-game:hover { background: #059669; }

        .teacher-note { display: none; background: #ECFDF5; border-left: 4px solid var(--rc-emerald); padding: 15px; border-radius: 8px; text-align: left; margin-top: 20px; color: #065F46; font-size: 0.95rem; animation: fadeIn 0.4s; }

        /* ==========================================================================
           7. EXAM ENGINE & TIMER
           ========================================================================== */
        .timer-badge {
            background: var(--rc-navy-dark); color: var(--rc-cyan); font-family: monospace; font-size: 1.5rem;
            font-weight: 800; padding: 10px 25px; border-radius: 30px; border: 2px solid var(--rc-cyan);
            display: inline-flex; align-items: center; gap: 10px; box-shadow: 0 0 20px rgba(6, 182, 212, 0.2);
        }
        .timer-badge.danger { color: #EF4444; border-color: #EF4444; animation: pulseDanger 1s infinite; box-shadow: 0 0 20px rgba(239, 68, 68, 0.4); }
        @keyframes pulseDanger { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

        .exam-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; border-bottom: 1px solid rgba(0,0,0,0.1); padding-bottom: 15px; }
        
        .mc-grid { display: grid; gap: 12px; margin-bottom: 2rem; }
        .mc-btn {
            width: 100%; padding: 18px 20px; border-radius: 12px; border: 2px solid rgba(26,43,76,0.2);
            background: rgba(255,255,255,0.7); color: var(--text-main); font-size: 1.1rem; font-family: 'Poppins';
            text-align: left; cursor: pointer; font-weight: 500; transition: 0.2s; backdrop-filter: blur(5px);
        }
        .mc-btn:hover { border-color: var(--rc-cyan); background: white; }
        .mc-btn.selected { border-color: var(--rc-navy); background: var(--rc-navy); color: white; font-weight: 700; box-shadow: 0 4px 15px rgba(26,43,76,0.2); }

        .btn-action {
            width: 100%; padding: 18px; border-radius: 30px; border: none;
            background: var(--rc-cyan); color: var(--rc-navy-dark); font-size: 1.1rem; font-weight: 800;
            cursor: pointer; transition: 0.2s; box-shadow: 0 5px 15px rgba(6, 182, 212, 0.3); letter-spacing: 1px;
        }
        .btn-action:disabled { background: rgba(0,0,0,0.1); color: var(--text-muted); cursor: not-allowed; box-shadow: none; }
        .btn-action:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(6, 182, 212, 0.4); }

        /* ==========================================================================
           8. MODALS & TOASTS
           ========================================================================== */
        .modal-overlay { position: fixed; inset: 0; background: rgba(13, 23, 42, 0.85); z-index: 5000; display: none; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(8px); }
        .modal-box { background: var(--glass-bg); width: 100%; max-width: 450px; padding: 3rem 2rem; border-radius: 20px; text-align: center; border: 1px solid var(--glass-border); box-shadow: var(--glass-shadow); animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .score-circle { width: 140px; height: 140px; border-radius: 50%; border: 8px solid var(--rc-cyan); display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 3rem; font-weight: 800; color: var(--rc-navy-dark); background: rgba(255,255,255,0.5); }
        
        #toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: var(--rc-navy-dark); color: var(--rc-cyan); padding: 14px 24px; border-radius: 30px; font-weight: 600; font-size: 1rem; border: 1px solid var(--rc-cyan); opacity: 0; transition: 0.3s; pointer-events: none; z-index: 9999; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        #toast.show { opacity: 1; transform: translateX(-50%) translateY(-10px); }

    </style>
</head>
<body>

    <div id="gateway">
        <div class="gateway-logo"><img src="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w200" alt="Rators Club"></div>
        <h1 class="gateway-title">Rators Tech Lab</h1>
        <p class="gateway-sub">Quantifiers: Food & Technology</p>
        <input type="text" id="student-name-input" class="name-input" placeholder="Enter your name..." autocomplete="off">
        <button class="btn-gateway" onclick="login()">INITIALIZE SYSTEM</button>
    </div>

    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="rc-logo-mini"><img src="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w128" alt="Logo"></div>
            <div class="rc-title">RATORS CLUB</div>
            <div style="font-size:0.8rem; color:var(--rc-cyan); margin-top:5px;" id="ui-student-name">Student</div>
        </div>
        <nav class="nav-menu">
            <button class="nav-link active" onclick="navTo('tab-welcome', this)"><i class="fas fa-home"></i> 1. Introduction</button>
            <button class="nav-link" onclick="navTo('tab-comparatives', this)"><i class="fas fa-balance-scale"></i> 2. Comparatives</button>
            <button class="nav-link" onclick="navTo('tab-superlatives', this)"><i class="fas fa-trophy"></i> 3. Superlatives</button>
            <button class="nav-link" onclick="navTo('tab-practice', this)"><i class="fas fa-puzzle-piece"></i> 4. Interactive Lab</button>
            <button class="nav-link" onclick="navTo('tab-test', this)"><i class="fas fa-stopwatch"></i> 5. Final Test</button>
        </nav>
    </aside>

    <main class="main-wrapper" id="main-content">
        
        <header class="mobile-header">
            <div style="font-weight:800; color:var(--rc-cyan);"><i class="fas fa-microchip"></i> RATORS CLUB</div>
            <button class="btn-menu" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
        </header>

        <div class="content-container">

            <section id="tab-welcome" class="view-section active">
                <div class="glass-card">
                    <h1 class="hero-title">The Quantifiers Matrix</h1>
                    <div class="hero-divider"></div>
                    <p style="font-size:1.1rem; margin-bottom:2rem;">
                        Bienvenido, <strong id="welcome-name" style="color:var(--rc-navy-dark);">Estudiante</strong>. Para dominar las comparaciones en inglés, primero debemos separar el universo en dos: lo que se puede contar y lo que no. Aplicaremos esto a la Comida y la Tecnología.
                    </p>

                    <div class="concept-grid">
                        <div class="concept-box" style="border-left: 4px solid var(--rc-cyan);">
                            <h4>Countable Nouns (Contables)</h4>
                            <p style="font-size:0.9rem; margin-bottom:10px;">Llevan plural (S) y puedes usar números.</p>
                            <span class="word-tag tag-food">Apples</span>
                            <span class="word-tag tag-food">Burgers</span>
                            <span class="word-tag tag-tech">Laptops</span>
                            <span class="word-tag tag-tech">Cables</span>
                            <span class="word-tag tag-tech">Gigabytes</span>
                        </div>
                        <div class="concept-box" style="border-left: 4px solid #F59E0B;">
                            <h4 style="color:#D97706;">Uncountable Nouns (Incontables)</h4>
                            <p style="font-size:0.9rem; margin-bottom:10px;">Masas, líquidos o conceptos abstractos. NO llevan "S".</p>
                            <span class="word-tag tag-food" style="background:#BE123C;">Water</span>
                            <span class="word-tag tag-food" style="background:#BE123C;">Rice</span>
                            <span class="word-tag tag-tech" style="background:#4338CA;">Software</span>
                            <span class="word-tag tag-tech" style="background:#4338CA;">RAM</span>
                            <span class="word-tag tag-tech" style="background:#4338CA;">Bandwidth</span>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tab-comparatives" class="view-section">
                <div class="glass-card">
                    <h1 class="hero-title">Comparatives</h1>
                    <div class="hero-divider"></div>
                    <p>Cuando comparamos dos cosas, usamos reglas estrictas dependiendo si hablamos de "Más" o "Menos".</p>

                    <div class="concept-box" style="margin-bottom:20px; border-color:var(--rc-emerald);">
                        <h4 style="color:var(--rc-emerald);">1. MORE (Para todo)</h4>
                        <p>Significa "Más". La ventaja es que funciona tanto para Contables como Incontables.</p>
                        <div class="formula-bar">MORE + Noun + THAN</div>
                        <ul style="margin-left:20px; font-weight:500;">
                            <li>My PC has <strong>more RAM</strong> than yours. <span style="color:var(--text-muted); font-size:0.8rem;">(Incontable)</span></li>
                            <li>I eat <strong>more apples</strong> than my brother. <span style="color:var(--text-muted); font-size:0.8rem;">(Contable)</span></li>
                        </ul>
                    </div>

                    <div class="concept-box" style="border-color:var(--rc-navy-dark);">
                        <h4 style="color:var(--rc-navy-dark);">2. FEWER vs LESS (Menos)</h4>
                        <p>Aquí es donde el Rators Club no falla. Ambos significan "menos", pero se dividen:</p>
                        
                        <div style="display:flex; gap:15px; margin-top:15px; flex-wrap:wrap;">
                            <div style="flex:1; background:rgba(255,255,255,0.8); padding:15px; border-radius:10px;">
                                <strong style="color:var(--rc-cyan);">FEWER (Para Contables)</strong><br>
                                <em>"This router has <strong>fewer cables</strong>."</em><br>
                                <em>"I ate <strong>fewer burgers</strong>."</em>
                            </div>
                            <div style="flex:1; background:rgba(255,255,255,0.8); padding:15px; border-radius:10px;">
                                <strong style="color:#D97706;">LESS (Para Incontables)</strong><br>
                                <em>"This app uses <strong>less battery</strong>."</em><br>
                                <em>"I drink <strong>less water</strong>."</em>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tab-superlatives" class="view-section">
                <div class="glass-card">
                    <h1 class="hero-title">Superlatives</h1>
                    <div class="hero-divider"></div>
                    <p>Los superlativos se usan para destacar a UNO sobre todo el grupo. Hablamos de los extremos ("El más..." o "El menos..."). Siempre llevan "The".</p>

                    <div class="concept-box" style="margin-bottom:20px; border-color:var(--rc-emerald);">
                        <h4 style="color:var(--rc-emerald);">1. THE MOST (El/La Más)</h4>
                        <p>Funciona perfecto para Contables e Incontables.</p>
                        <div class="formula-bar">THE MOST + Noun</div>
                        <ul style="margin-left:20px; font-weight:500;">
                            <li>This server has <strong>the most storage</strong>.</li>
                            <li>He bought <strong>the most devices</strong> in the store.</li>
                        </ul>
                    </div>

                    <div class="concept-box" style="border-color:var(--rc-navy-dark);">
                        <h4 style="color:var(--rc-navy-dark);">2. THE FEWEST vs THE LEAST (El Menos)</h4>
                        
                        <div style="display:flex; gap:15px; margin-top:15px; flex-wrap:wrap;">
                            <div style="flex:1; background:rgba(255,255,255,0.8); padding:15px; border-radius:10px; border-left:4px solid var(--rc-cyan);">
                                <strong style="color:var(--rc-cyan);">THE FEWEST (Contables)</strong><br>
                                <em>"My phone has <strong>the fewest apps</strong>."</em> (El que tiene menos apps).
                            </div>
                            <div style="flex:1; background:rgba(255,255,255,0.8); padding:15px; border-radius:10px; border-left:4px solid #D97706;">
                                <strong style="color:#D97706;">THE LEAST (Incontables)</strong><br>
                                <em>"This laptop uses <strong>the least power</strong>."</em> (La que usa menos energía).
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tab-practice" class="view-section">
                <div class="glass-card">
                    <h1 class="hero-title">Syntax Builder Lab</h1>
                    <div class="hero-divider"></div>
                    <p>Toca las palabras en el orden correcto para construir la oración con la gramática perfecta.</p>
                    
                    <div style="display:flex; justify-content:space-between; font-weight:800; color:var(--rc-navy-dark); margin-bottom:10px;">
                        <span>Level <span id="game-level">1/5</span></span>
                    </div>

                    <div class="game-area">
                        <div class="answer-area" id="answer-box"></div>
                        <div class="pool-area" id="word-pool"></div>
                        
                        <button class="btn-check-game" id="btn-check-game" onclick="checkGame()">VERIFICAR ESTRUCTURA</button>
                        
                        <div class="teacher-note" id="game-note">
                            <i class="fas fa-graduation-cap"></i> <strong style="color:var(--rc-navy-dark);">Teacher's Note:</strong> <span id="note-text">Explanation here</span>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tab-test" class="view-section">
                <div class="glass-card" id="test-intro">
                    <div style="text-align:center; padding:2rem 0;">
                        <i class="fas fa-shield-alt" style="font-size:4rem; color:var(--rc-navy-dark); margin-bottom:20px;"></i>
                        <h2 style="font-size:2.2rem; margin-bottom:15px;">Certification Protocol</h2>
                        <p style="font-size:1.1rem; color:var(--text-muted); margin-bottom:10px;">
                            <strong>15 Reactivos</strong>. Modo contrarreloj.
                        </p>
                        <p style="color:#EF4444; font-weight:700; margin-bottom:30px;"><i class="fas fa-stopwatch"></i> Tiempo límite: 5 Minutos</p>
                        <button class="btn-action" style="max-width: 300px; margin:0 auto;" onclick="startTest()">
                            INICIAR PROTOCOLO <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <div class="glass-card" id="test-engine" style="display:none; padding:3rem 2rem;">
                    <div class="exam-header">
                        <div style="font-weight:800; color:var(--text-muted); font-size:1.1rem;">Q <span id="q-num">1</span>/15</div>
                        <div class="timer-badge" id="timer-display"><i class="fas fa-clock"></i> 05:00</div>
                    </div>

                    <div id="q-area" style="min-height:200px; margin-top:20px;">
                        </div>

                    <button class="btn-action" id="btn-next-q" onclick="submitQ()" disabled>NEXT</button>
                </div>
            </section>

        </div> </main>

    <div id="toast"><span id="toast-msg">Mensaje</span></div>

    <div class="modal-overlay" id="resultModal">
        <div class="modal-box">
            <h2 style="font-size:2.2rem; margin-bottom:5px; font-family:'Lora'; color:var(--rc-navy-dark);">System Report</h2>
            <p style="font-size:1.2rem; font-weight:700; color:var(--rc-cyan); margin-bottom:25px; letter-spacing:1px;" id="modal-name">STUDENT</p>
            
            <div class="score-circle" id="modal-score">100%</div>
            
            <p id="modal-msg" style="font-size:1rem; color:var(--text-body); margin-bottom:30px;">Análisis completado.</p>
            
            <button class="btn-action" onclick="location.reload()"><i class="fas fa-redo"></i> REINICIAR SISTEMA</button>
            <div style="font-size:0.7rem; color:var(--text-muted); margin-top:20px;">GNU General Public License v3.0 | Rators Club 2026</div>
        </div>
    </div>

    <script>
        // --- 1. MEMORY & GATEWAY ---
        let studentName = "";

        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3500);
        }

        function login() {
            const val = document.getElementById('student-name-input').value.trim();
            if(val.length < 2) { showToast("Error: Nombre inválido."); return; }
            studentName = val;
            
            document.getElementById('ui-student-name').innerText = studentName.toUpperCase();
            document.getElementById('welcome-name').innerText = studentName;
            document.getElementById('modal-name').innerText = studentName.toUpperCase();

            document.getElementById('gateway').style.display = 'none';
        }

        // --- 2. SIDEBAR NAV ---
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
            document.getElementById('sidebarOverlay').classList.toggle('active');
        }

        function navTo(tabId, btnElement) {
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            btnElement.classList.add('active');

            document.querySelectorAll('.view-section').forEach(s => {
                s.classList.remove('active');
                s.style.animation = 'none';
            });
            
            const target = document.getElementById(tabId);
            target.classList.add('active');
            void target.offsetWidth; // trigger reflow
            target.style.animation = 'fadeIn 0.5s ease forwards';

            if(window.innerWidth <= 992) toggleSidebar();
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // --- 3. GAME ENGINE (UNJUMBLE) ---
        const gameDB = [
            { words: ["My", "new", "laptop", "has", "fewer", "cables."], ans: "My new laptop has fewer cables.", note: "Cables es Contable (plural), por lo tanto usamos 'fewer' en lugar de 'less'." },
            { words: ["We", "should", "eat", "less", "fast", "food."], ans: "We should eat less fast food.", note: "Food es Incontable (abstracto), por lo tanto usamos 'less' (menos)." },
            { words: ["This", "phone", "has", "the", "least", "storage."], ans: "This phone has the least storage.", note: "Storage (Almacenamiento) es Incontable. El superlativo es 'the least'." },
            { words: ["She", "bought", "the", "fewest", "apples."], ans: "She bought the fewest apples.", note: "Apples es Contable. El superlativo para el mínimo es 'the fewest'." },
            { words: ["Video", "games", "need", "more", "RAM."], ans: "Video games need more RAM.", note: "RAM es incontable, pero 'more' (más) funciona perfecto para ambos tipos." }
        ];

        let gameLevel = 0;

        function loadGame() {
            if(gameLevel >= gameDB.length) {
                document.getElementById('word-pool').innerHTML = `<h3 style="color:var(--rc-cyan); width:100%;">¡Laboratorio Completado! Pasa al Test Final.</h3>`;
                document.getElementById('answer-box').innerHTML = '';
                document.getElementById('btn-check-game').style.display = 'none';
                return;
            }

            document.getElementById('game-level').innerText = `${gameLevel + 1}/${gameDB.length}`;
            document.getElementById('game-note').style.display = 'none';
            document.getElementById('btn-check-game').innerText = "VERIFICAR ESTRUCTURA";
            document.getElementById('btn-check-game').style.background = "var(--rc-emerald)";
            document.getElementById('btn-check-game').onclick = checkGame;

            const pool = document.getElementById('word-pool');
            const answer = document.getElementById('answer-box');
            pool.innerHTML = '';
            answer.innerHTML = '';

            // Shuffle words
            let words = [...gameDB[gameLevel].words];
            words.sort(() => Math.random() - 0.5);

            words.forEach((w, i) => {
                let btn = document.createElement('div');
                btn.className = 'word-chip';
                btn.innerText = w;
                btn.id = `chip-${i}`;
                btn.onclick = () => moveChip(btn);
                pool.appendChild(btn);
            });
        }

        function moveChip(chip) {
            const pool = document.getElementById('word-pool');
            const answer = document.getElementById('answer-box');
            if(chip.parentElement === pool) { answer.appendChild(chip); } 
            else { pool.appendChild(chip); }
        }

        function checkGame() {
            const answerBox = document.getElementById('answer-box');
            const chips = answerBox.querySelectorAll('.word-chip');
            let userSentence = Array.from(chips).map(c => c.innerText).join(' ');

            if(userSentence === gameDB[gameLevel].ans) {
                // Correcto
                document.getElementById('note-text').innerText = gameDB[gameLevel].note;
                document.getElementById('game-note').style.display = 'block';
                
                const btn = document.getElementById('btn-check-game');
                btn.innerText = "SIGUIENTE NIVEL";
                btn.style.background = "var(--rc-cyan)";
                btn.onclick = () => { gameLevel++; loadGame(); };
                confetti({ particleCount: 50, spread: 60, origin: { y: 0.8 } });
            } else {
                answerBox.style.animation = "shake 0.4s";
                setTimeout(() => answerBox.style.animation = "", 400);
                showToast("Estructura incorrecta. Revisa contables/incontables.");
            }
        }

        // --- 4. EXAM & TIMER ENGINE ---
        const examDB = [
            { q: "I have _____ apps on my phone than you.", opts: ["less", "fewer", "more fewest"], ans: 1 },
            { q: "This recipe uses _____ sugar than the other one.", opts: ["fewer", "the least", "less"], ans: 2 },
            { q: "Which device has _____ RAM of all?", opts: ["the most", "more", "the fewest"], ans: 0 },
            { q: "He drank _____ water today.", opts: ["fewer", "less", "least"], ans: 1 },
            { q: "Out of all computers, this one has _____ USB ports.", opts: ["the fewest", "the least", "less"], ans: 0 },
            { q: "This software requires _____ processing power than the old version.", opts: ["less", "fewer", "the least"], ans: 0 },
            { q: "We bought _____ tomatoes than we actually need.", opts: ["less", "fewer", "fewest"], ans: 1 },
            { q: "She eats _____ meat out of everyone in the family.", opts: ["less", "the fewest", "the least"], ans: 2 },
            { q: "I need _____ gigabytes to install this game.", opts: ["more", "most", "the most"], ans: 0 },
            { q: "My tablet has _____ battery life than my laptop.", opts: ["fewer", "less", "the least"], ans: 1 },
            { q: "He bought _____ pizzas than John.", opts: ["less", "fewer", "the fewest"], ans: 1 },
            { q: "This restaurant serves _____ rice than that one.", opts: ["less", "fewer", "least"], ans: 0 },
            { q: "That CPU produces _____ heat.", opts: ["fewer", "less", "the fewest"], ans: 1 },
            { q: "Which phone has _____ cameras? (Only 1)", opts: ["the least", "the fewest", "less"], ans: 1 },
            { q: "I want _____ cheese on my burger, please.", opts: ["fewer", "less", "the least"], ans: 1 }
        ];

        let exState = { qIndex: 0, score: 0, selOpt: null, answered: false };
        let timerInt;
        let timeLeft = 300; // 5 minutes (5 * 60)

        function startTest() {
            document.getElementById('test-intro').style.display = 'none';
            document.getElementById('test-engine').style.display = 'block';
            exState = { qIndex: 0, score: 0, selOpt: null, answered: false };
            
            // Iniciar Timer
            timeLeft = 300;
            updateTimerUI();
            timerInt = setInterval(() => {
                timeLeft--;
                updateTimerUI();
                if(timeLeft <= 0) {
                    clearInterval(timerInt);
                    showToast("¡Tiempo agotado! Evaluando...");
                    endExam();
                }
            }, 1000);

            loadExQuestion();
        }

        function updateTimerUI() {
            const m = Math.floor(timeLeft / 60);
            const s = timeLeft % 60;
            const ui = document.getElementById('timer-display');
            ui.innerHTML = `<i class="fas fa-clock"></i> 0${m}:${s < 10 ? '0' : ''}${s}`;
            
            if(timeLeft <= 60) ui.classList.add('danger'); // Menos de 1 min
        }

        function loadExQuestion() {
            const q = examDB[exState.qIndex];
            const area = document.getElementById('q-area');
            const btn = document.getElementById('btn-next-q');
            
            exState.answered = false; exState.selOpt = null;
            btn.disabled = true; btn.innerText = "CHECK ANSWER";

            document.getElementById('q-num').innerText = exState.qIndex + 1;

            let html = `<h3 style="font-size:1.4rem; color:var(--text-main); margin-bottom:20px; line-height:1.4;">${exState.qIndex + 1}. ${q.q}</h3><div class="mc-grid">`;
            q.opts.forEach((opt, i) => {
                html += `<button class="mc-btn" onclick="selectEx(${i}, this)">${opt}</button>`;
            });
            html += `</div>`;
            area.innerHTML = html;
        }

        function selectEx(idx, btn) {
            if(exState.answered) return;
            document.querySelectorAll('.mc-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            exState.selOpt = idx;
            document.getElementById('btn-next-q').disabled = false;
        }

        function submitQ() {
            const q = examDB[exState.qIndex];
            const btn = document.getElementById('btn-next-q');

            if(!exState.answered) {
                exState.answered = true;
                const btns = document.querySelectorAll('.mc-btn');
                
                if(exState.selOpt === q.ans) {
                    btns[exState.selOpt].style.background = "var(--rc-emerald)";
                    btns[exState.selOpt].style.color = "white";
                    btns[exState.selOpt].style.borderColor = "var(--rc-emerald)";
                    exState.score++;
                } else {
                    btns[exState.selOpt].style.background = "#EF4444";
                    btns[exState.selOpt].style.color = "white";
                    btns[q.ans].style.background = "var(--rc-emerald)";
                    btns[q.ans].style.color = "white";
                }

                btn.innerText = (exState.qIndex === examDB.length - 1) ? "FINISH & GRADE" : "NEXT QUESTION";
            } else {
                exState.qIndex++;
                if(exState.qIndex < examDB.length) loadExQuestion();
                else endExam();
            }
        }

        function endExam() {
            clearInterval(timerInt);
            const pct = Math.round((exState.score / examDB.length) * 100);
            
            const circle = document.getElementById('modal-score');
            const msg = document.getElementById('modal-msg');
            circle.innerText = `${pct}%`;

            if(pct >= 80) {
                circle.style.borderColor = "var(--rc-emerald)";
                circle.style.color = "var(--rc-emerald)";
                msg.innerText = `¡Excelente trabajo! Has dominado los cuantificadores en tecnología y comida (${exState.score}/15).`;
                confetti({ particleCount: 200, spread: 100 });
            } else {
                circle.style.borderColor = "#EF4444";
                circle.style.color = "#EF4444";
                msg.innerText = `Obtuviste ${exState.score} de 15. Necesitas repasar la regla de Contables (Fewer/Fewest) vs Incontables (Less/Least).`;
            }

            document.getElementById('resultModal').style.display = 'flex';
        }

        // Initialize
        window.onload = () => { loadGame(); };

    </script>
</body>
</html>
