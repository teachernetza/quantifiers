<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Advanced Quantifiers | Rators Club</title>
    
    <link rel="icon" type="image/png" href="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w128">
    <link rel="apple-touch-icon" href="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w512">
    <meta name="theme-color" content="#FFFFFF">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@300;400;600;800;900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* ==========================================================================
           1. PREMIUM LIGHT THEME & COLOR PALETTE
           ========================================================================== */
        :root {
            --bg-base: #F8FAFC;        
            --bg-pure: #FFFFFF;        
            --bg-glass: rgba(255, 255, 255, 0.85);
            
            --rc-navy: #0F172A;        
            --rc-blue: #2563EB;        
            --rc-cyan: #06B6D4;        
            
            --c-emerald: #10B981;      
            --c-rose: #E11D48;         
            --c-amber: #F59E0B;        
            --c-purple: #8B5CF6;       
            
            --text-heading: #020617;   
            --text-body: #334155;      
            --text-muted: #64748B;     
            
            --sidebar-width: 280px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --shadow-soft: 0 10px 40px -10px rgba(15, 23, 42, 0.08);
            --shadow-float: 0 20px 50px -20px rgba(37, 99, 235, 0.25);
            --border-light: 1px solid rgba(15, 23, 42, 0.08);
            --trans-smooth: 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            --trans-fast: 0.2s ease;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-base);
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(6, 182, 212, 0.04), transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(37, 99, 235, 0.04), transparent 25%);
            color: var(--text-body);
            line-height: 1.6;
            overflow-x: hidden;
            display: flex;
            min-height: 100vh;
        }

        h1, h2, h3, h4 { font-family: 'Outfit', sans-serif; color: var(--text-heading); line-height: 1.2; }
        
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-base); }
        ::-webkit-scrollbar-thumb { background: #CBD5E1; border-radius: 10px; }

        /* ==========================================================================
           2. GATEWAY (PANTALLA DE INGRESO)
           ========================================================================== */
        #gateway {
            position: fixed; inset: 0; background: var(--bg-pure); z-index: 9999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 2rem; text-align: center;
        }
        
        .gateway-logo { width: 140px; height: 140px; border-radius: 50%; padding: 4px; background: linear-gradient(135deg, var(--rc-blue), var(--rc-cyan)); margin-bottom: 2rem; box-shadow: var(--shadow-float); }
        .gateway-logo img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 4px solid var(--bg-pure); }
        
        .gateway-title { font-size: 2.8rem; font-weight: 900; color: var(--rc-navy); margin-bottom: 0.5rem; letter-spacing: -1px; }
        .gateway-sub { color: var(--rc-blue); font-weight: 600; margin-bottom: 2.5rem; text-transform: uppercase; letter-spacing: 2px; font-size: 0.9rem; }
        
        .name-input {
            width: 100%; max-width: 350px; padding: 18px 25px; border-radius: var(--radius-lg);
            border: 2px solid #E2E8F0; background: var(--bg-base); text-align: center;
            font-family: 'Outfit'; font-size: 1.2rem; font-weight: 600; color: var(--rc-navy);
            transition: var(--trans-smooth); margin-bottom: 20px;
        }
        .name-input:focus { border-color: var(--rc-blue); background: var(--bg-pure); box-shadow: 0 0 0 4px rgba(37,99,235,0.1); }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--rc-blue), var(--rc-cyan)); color: var(--bg-pure);
            padding: 18px 40px; border-radius: 50px; border: none; font-size: 1.1rem; font-weight: 800; font-family: 'Outfit';
            cursor: pointer; letter-spacing: 1px; box-shadow: var(--shadow-float); transition: var(--trans-smooth);
            width: 100%; max-width: 350px;
        }
        .btn-primary:active { transform: scale(0.96); }

        /* ==========================================================================
           3. SIDEBAR NAVIGATION & MOBILE HEADER
           ========================================================================== */
        .sidebar {
            width: var(--sidebar-width); height: 100vh; background: var(--bg-pure);
            border-right: var(--border-light); position: fixed; top: 0; left: 0; z-index: 1000;
            display: flex; flex-direction: column; transition: transform var(--trans-smooth);
        }

        .sidebar-header { padding: 2.5rem 1.5rem 1.5rem; text-align: center; border-bottom: var(--border-light); }
        .rc-logo-mini { width: 80px; height: 80px; margin: 0 auto 1rem; border-radius: 20px; box-shadow: var(--shadow-soft); overflow: hidden; }
        .rc-logo-mini img { width: 100%; height: 100%; object-fit: cover; }
        .rc-title { font-family: 'Outfit'; font-size: 1.3rem; font-weight: 900; color: var(--rc-navy); }
        .rc-subtitle { font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase; font-weight: 600; margin-top: 5px; }

        .nav-menu { padding: 2rem 1.2rem; flex: 1; display: flex; flex-direction: column; gap: 8px; overflow-y: auto; }
        .nav-link {
            width: 100%; padding: 15px; border-radius: 12px; background: transparent; border: 1px solid transparent;
            color: var(--text-muted); text-align: left; font-size: 1rem; font-weight: 600; font-family: 'Inter';
            cursor: pointer; transition: var(--trans-fast); display: flex; align-items: center; gap: 12px;
        }
        .nav-link i { font-size: 1.2rem; width: 24px; text-align: center; color: #CBD5E1; transition: var(--trans-fast); }
        .nav-link:hover { background: var(--bg-base); color: var(--rc-navy); }
        .nav-link.active { background: var(--rc-navy); color: var(--bg-pure); box-shadow: 0 8px 15px -5px rgba(15, 23, 42, 0.2); }
        .nav-link.active i { color: var(--rc-cyan); }

        .sidebar-footer { padding: 1.5rem; border-top: var(--border-light); }
        .logout-btn { background: #FEF2F2; color: var(--c-rose); border: none; padding: 12px; width: 100%; border-radius: 10px; font-weight: 600; cursor: pointer; transition: 0.2s; font-family: 'Inter'; }

        /* MOBILE ADAPTATION */
        .main-wrapper { margin-left: var(--sidebar-width); width: calc(100% - var(--sidebar-width)); min-height: 100vh; display: flex; flex-direction: column; transition: var(--trans-smooth); }
        
        .mobile-header {
            display: none; background: var(--bg-glass); backdrop-filter: blur(15px); padding: 12px 20px;
            align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 900;
            border-bottom: var(--border-light); box-shadow: var(--shadow-soft);
        }
        /* El Logo en el Header Móvil */
        .mobile-brand { display: flex; align-items: center; gap: 10px; font-family: 'Outfit'; font-weight: 800; color: var(--rc-navy); font-size: 1.2rem; }
        .mobile-brand img { width: 35px; height: 35px; border-radius: 50%; border: 2px solid var(--rc-blue); object-fit: cover; }
        
        .btn-menu { background: transparent; border: none; color: var(--rc-navy); font-size: 1.5rem; cursor: pointer; }

        .content-container { padding: 3rem 2.5rem; max-width: 900px; margin: 0 auto; width: 100%; flex: 1; }
        .sidebar-overlay { position: fixed; inset: 0; background: rgba(15,23,42,0.5); z-index: 999; display: none; opacity: 0; transition: var(--trans-smooth); backdrop-filter: blur(3px); }

        @media (max-width: 1024px) {
            .sidebar { transform: translateX(-100%); }
            .sidebar.open { transform: translateX(0); }
            .main-wrapper { margin-left: 0; width: 100%; }
            .mobile-header { display: flex; }
            .sidebar-overlay.active { display: block; opacity: 1; }
            /* Ajustes estrictos para móviles */
            .content-container { padding: 1.5rem 1rem; }
            .hero-title { font-size: 2.2rem; }
            .glass-card { padding: 1.5rem; border-radius: 16px; margin-bottom: 1.5rem; }
        }

        /* ==========================================================================
           4. ELEGANT CARDS & THEORY
           ========================================================================== */
        .view-section { display: none; animation: slideUpFade 0.5s ease forwards; opacity: 0; transform: translateY(15px); }
        .view-section.active { display: block; }
        @keyframes slideUpFade { to { opacity: 1; transform: translateY(0); } }

        .glass-card { background: var(--bg-glass); backdrop-filter: blur(20px); border: var(--border-light); border-radius: var(--radius-lg); padding: 3rem; box-shadow: var(--shadow-soft); margin-bottom: 2rem; position: relative; }
        
        .hero-title { margin-bottom: 0.5rem; color: var(--rc-navy); letter-spacing: -0.5px; }
        .hero-divider { width: 60px; height: 5px; background: linear-gradient(90deg, var(--rc-blue), var(--rc-cyan)); border-radius: 5px; margin-bottom: 1.5rem; }
        
        .student-badge { display: inline-flex; align-items: center; gap: 8px; background: #EFF6FF; color: var(--rc-blue); padding: 6px 14px; border-radius: 20px; font-weight: 600; font-size: 0.9rem; margin-bottom: 1.5rem; }

        .master-text { font-size: 1.05rem; margin-bottom: 1.5rem; }
        .highlight { color: var(--rc-blue); font-weight: 700; }

        /* Grids adaptables para móvil */
        .vocab-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; margin-top: 1.5rem; }
        .vocab-col { background: var(--bg-pure); border: 1px solid #E2E8F0; border-radius: 12px; padding: 15px; }
        .v-title { font-family: 'Outfit'; font-size: 1.05rem; font-weight: 800; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 2px solid; }
        .v-list { list-style: none; }
        .v-list li { margin-bottom: 6px; font-weight: 500; font-size: 0.95rem; display: flex; align-items: center; gap: 8px; }

        .info-box { background: var(--bg-pure); border: 1px solid #E2E8F0; border-radius: 16px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        .info-title { font-family: 'Outfit'; font-size: 1.2rem; font-weight: 800; margin-bottom: 12px; display: flex; align-items: center; gap: 10px; }
        
        .formula-bar {
            background: var(--rc-navy); color: var(--bg-pure); font-family: monospace; font-size: 1.1rem;
            font-weight: 600; padding: 12px 20px; border-radius: 10px; display: block; width: 100%;
            margin: 15px 0; word-break: break-word; text-align: center;
        }

        .split-grid { display: grid; grid-template-columns: 1fr; gap: 15px; margin-top: 15px; }
        @media (min-width: 768px) { .split-grid { grid-template-columns: 1fr 1fr; } }
        
        .split-card { background: var(--bg-base); padding: 15px; border-radius: 10px; border-left: 4px solid; }

        .error-box { background: #FEF2F2; border-left: 4px solid var(--c-rose); padding: 15px; border-radius: 0 10px 10px 0; margin-top: 20px; }
        .error-box h4 { color: #BE123C; margin-bottom: 5px; font-size: 1.1rem; }

        /* ==========================================================================
           5. UNJUMBLE LAB (MOBILE OPTIMIZED)
           ========================================================================== */
        .lab-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #E2E8F0; }
        .level-badge { font-family: 'Outfit'; font-weight: 800; color: var(--rc-blue); font-size: 1.2rem; }
        
        .game-area { background: var(--bg-base); border: 2px dashed #CBD5E1; border-radius: 16px; padding: 20px; text-align: center; }

        .answer-area { min-height: 80px; display: flex; flex-wrap: wrap; justify-content: center; align-content: center; gap: 8px; padding: 15px; border-bottom: 3px solid var(--rc-navy); margin-bottom: 20px; background: rgba(255,255,255,0.7); border-radius: 10px 10px 0 0; }
        .pool-area { min-height: 100px; display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; padding: 15px; background: #F1F5F9; border-radius: 12px; margin-bottom: 20px; }
        
        .word-chip {
            background: var(--bg-pure); color: var(--rc-navy); border: 1px solid #CBD5E1;
            padding: 10px 18px; border-radius: 8px; font-family: 'Inter'; font-weight: 600; font-size: 1.05rem;
            cursor: pointer; transition: 0.2s; user-select: none; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .word-chip:active { transform: scale(0.9); background: var(--rc-blue); color: white; }

        .teacher-feedback { display: none; background: #ECFDF5; border: 1px solid #A7F3D0; padding: 15px; border-radius: 12px; text-align: left; margin-top: 20px; }
        .feedback-title { color: #065F46; font-family: 'Outfit'; font-weight: 800; font-size: 1.1rem; margin-bottom: 5px; }

        /* ==========================================================================
           6. EXAM ENGINE & TIMER (MOBILE OPTIMIZED)
           ========================================================================== */
        .exam-header-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; background: var(--bg-base); padding: 15px; border-radius: 12px; }
        .q-tracker { font-family: 'Outfit'; font-size: 1.2rem; font-weight: 800; color: var(--rc-navy); }
        
        .timer-display {
            background: var(--bg-pure); color: var(--rc-blue); font-family: monospace; font-size: 1.4rem;
            font-weight: 700; padding: 8px 20px; border-radius: 30px; border: 2px solid var(--rc-blue);
            display: inline-flex; align-items: center; gap: 8px; box-shadow: var(--shadow-soft);
        }
        .timer-display.danger { color: var(--c-rose); border-color: var(--c-rose); background: #FFF1F2; animation: pulseRed 1s infinite; }
        @keyframes pulseRed { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

        .question-text { font-size: 1.3rem; font-weight: 600; color: var(--rc-navy); margin-bottom: 1.5rem; line-height: 1.4; font-family: 'Outfit'; }
        
        .options-container { display: flex; flex-direction: column; gap: 12px; margin-bottom: 2rem; }
        .opt-card {
            width: 100%; padding: 16px 20px; border-radius: 12px; border: 2px solid #E2E8F0;
            background: var(--bg-pure); color: var(--text-body); font-size: 1.05rem; font-family: 'Inter';
            text-align: left; cursor: pointer; font-weight: 500; transition: var(--trans-fast);
            /* Touch target optimization */
            min-height: 56px; 
        }
        .opt-card.selected { border-color: var(--rc-blue); background: var(--rc-blue); color: white; font-weight: 700; box-shadow: 0 4px 10px rgba(37,99,235,0.2); }

        /* ==========================================================================
           7. MODALS, TOASTS & FOOTER
           ========================================================================== */
        .overlay { position: fixed; inset: 0; background: rgba(15,23,42,0.8); z-index: 5000; display: none; align-items: center; justify-content: center; padding: 20px; backdrop-filter: blur(5px); }
        .result-card { background: var(--bg-pure); width: 100%; max-width: 450px; padding: 3rem 2rem; border-radius: 20px; text-align: center; box-shadow: var(--shadow-float); animation: zoomIn 0.4s ease; }
        @keyframes zoomIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .score-display { width: 140px; height: 140px; border-radius: 50%; border: 8px solid var(--rc-blue); display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 3rem; font-weight: 900; color: var(--rc-navy); font-family: 'Outfit'; }
        
        #toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: var(--rc-navy); color: white; padding: 14px 24px; border-radius: 30px; font-weight: 600; font-size: 0.95rem; opacity: 0; transition: 0.3s; pointer-events: none; z-index: 9999; box-shadow: 0 10px 20px rgba(0,0,0,0.2); display: flex; align-items: center; gap: 8px; width: 90%; max-width: 350px; justify-content: center; text-align: center; }
        #toast.show { opacity: 1; transform: translateX(-50%) translateY(-10px); }

        .footer { text-align: center; padding: 1.5rem; color: var(--text-muted); font-size: 0.8rem; margin-top: auto; border-top: var(--border-light); }
    </style>
</head>
<body>

    <div id="gateway">
        <div class="gateway-logo"><img src="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w300" alt="Logo"></div>
        <h1 class="gateway-title">Quantifiers Masterclass</h1>
        <p class="gateway-sub">Tech & Culinary Lab</p>
        
        <input type="text" id="student-input" class="name-input" placeholder="Enter your full name..." autocomplete="off">
        <button class="btn-primary" onclick="initSystem()">ACCESS SECURE LAB</button>
    </div>

    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="rc-logo-mini"><img src="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w200" alt="Logo"></div>
            <div class="rc-title">RATORS CLUB</div>
            <div class="rc-subtitle" id="ui-name">Student Name</div>
        </div>
        
        <nav class="nav-menu">
            <button class="nav-link active" onclick="navTo('sec-intro', this)"><i class="fas fa-book-open"></i> 1. The Philosophy</button>
            <button class="nav-link" onclick="navTo('sec-comp', this)"><i class="fas fa-balance-scale-right"></i> 2. Comparatives</button>
            <button class="nav-link" onclick="navTo('sec-sup', this)"><i class="fas fa-trophy"></i> 3. Superlatives</button>
            <button class="nav-link" onclick="navTo('sec-lab', this)"><i class="fas fa-hammer"></i> 4. Syntax Lab</button>
            <button class="nav-link" onclick="navTo('sec-test', this)" style="color:var(--rc-blue);"><i class="fas fa-stopwatch"></i> 5. Certification</button>
        </nav>

        <div class="sidebar-footer">
            <button class="logout-btn" onclick="location.reload()"><i class="fas fa-power-off"></i> Logout</button>
        </div>
    </aside>

    <main class="main-wrapper" id="main-content">
        
        <header class="mobile-header">
            <div class="mobile-brand">
                <img src="https://drive.google.com/thumbnail?id=1bOFY9XiVAv-WRQnVHXSnL5FHVEoK3UAp&sz=w64" alt="RC">
                RATORS CLUB
            </div>
            <button class="btn-menu" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
        </header>

        <div class="content-container">

            <section id="sec-intro" class="view-section active">
                <div class="glass-card">
                    <div class="student-badge"><i class="fas fa-id-badge"></i> Authenticated: <span id="welcome-student-name" style="margin-left:5px;">Name</span></div>
                    <h1 class="hero-title">The Philosophy of Quantifiers</h1>
                    <div class="hero-divider"></div>
                    
                    <p class="master-text">
                        En el inglés, el universo se divide en dos dimensiones: <strong>lo discreto (Contable)</strong> y <strong>lo continuo (Incontable)</strong>. Si puedes asignarle un número directo (1, 2, 3), es contable. Si necesitas una unidad de medida, es incontable.
                    </p>

                    <div class="vocab-grid">
                        <div class="vocab-col">
                            <h4 class="v-title" style="color:var(--c-emerald); border-color:var(--c-emerald);">Countable Food</h4>
                            <ul class="v-list">
                                <li><i class="fas fa-hamburger" style="color:var(--c-emerald);"></i> Burgers (Hamburguesas)</li>
                                <li><i class="fas fa-apple-alt" style="color:var(--c-emerald);"></i> Apples (Manzanas)</li>
                            </ul>
                        </div>
                        <div class="vocab-col">
                            <h4 class="v-title" style="color:var(--rc-blue); border-color:var(--rc-blue);">Countable Tech</h4>
                            <ul class="v-list">
                                <li><i class="fas fa-laptop" style="color:var(--rc-blue);"></i> Laptops (Computadoras)</li>
                                <li><i class="fas fa-plug" style="color:var(--rc-blue);"></i> Cables (Cables)</li>
                            </ul>
                        </div>
                        <div class="vocab-col">
                            <h4 class="v-title" style="color:var(--c-amber); border-color:var(--c-amber);">Uncountable Food</h4>
                            <ul class="v-list">
                                <li><i class="fas fa-tint" style="color:var(--c-amber);"></i> Water (Agua)</li>
                                <li><i class="fas fa-cheese" style="color:var(--c-amber);"></i> Cheese (Queso)</li>
                            </ul>
                        </div>
                        <div class="vocab-col">
                            <h4 class="v-title" style="color:var(--c-purple); border-color:var(--c-purple);">Uncountable Tech</h4>
                            <ul class="v-list">
                                <li><i class="fas fa-memory" style="color:var(--c-purple);"></i> RAM (Memoria)</li>
                                <li><i class="fas fa-wifi" style="color:var(--c-purple);"></i> Bandwidth (Ancho de banda)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section id="sec-comp" class="view-section">
                <div class="glass-card">
                    <h1 class="hero-title">Comparatives</h1>
                    <div class="hero-divider" style="background:var(--rc-blue);"></div>
                    
                    <p class="master-text">Comparamos <strong>dos entidades</strong>. Aquí el vocabulario cambia si es contable o incontable.</p>

                    <div class="info-box">
                        <div class="info-title" style="color:var(--c-emerald);"><i class="fas fa-arrow-up"></i> 1. Superiority: "MORE" (Más)</div>
                        <p>El comodín universal. Funciona para Contables e Incontables.</p>
                        <div class="formula-bar">MORE + Noun + THAN</div>
                        <ul style="margin-top:10px; font-weight:500;">
                            <li>My PC has <strong>more ports than</strong> yours.</li>
                            <li>This requires <strong>more sugar than</strong> usual.</li>
                        </ul>
                    </div>

                    <div class="info-box" style="margin-top:20px;">
                        <div class="info-title" style="color:var(--c-rose);"><i class="fas fa-arrow-down"></i> 2. Inferiority: "FEWER" vs "LESS"</div>
                        <p>Ambos significan "menos", pero se dividen estrictamente:</p>
                        
                        <div class="split-grid">
                            <div class="split-card" style="border-color:var(--rc-blue);">
                                <h4 style="color:var(--rc-blue); margin-bottom:5px;">FEWER (Contables)</h4>
                                <p style="font-size:0.9rem; color:var(--text-muted);">Cosas con plural (S).</p>
                                <em>"I bought <strong>fewer apples</strong>."</em>
                            </div>
                            <div class="split-card" style="border-color:var(--c-amber);">
                                <h4 style="color:var(--c-amber); margin-bottom:5px;">LESS (Incontables)</h4>
                                <p style="font-size:0.9rem; color:var(--text-muted);">Masas o conceptos.</p>
                                <em>"It consumes <strong>less RAM</strong>."</em>
                            </div>
                        </div>

                        <div class="error-box">
                            <h4><i class="fas fa-exclamation-triangle"></i> Fatal Error</h4>
                            <p style="font-size:0.9rem;">Decir <em>"less people"</em> es incorrecto en gramática formal. 'People' se cuenta (1 persona, 2 personas). Lo correcto es <strong>"fewer people"</strong>.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="sec-sup" class="view-section">
                <div class="glass-card">
                    <h1 class="hero-title">Superlatives</h1>
                    <div class="hero-divider" style="background:var(--c-purple);"></div>
                    <p class="master-text">Declaran al rey de un grupo (3 o más). Representan el límite. Siempre llevan <strong>"THE"</strong>.</p>

                    <div class="info-box">
                        <div class="info-title" style="color:var(--c-emerald);"><i class="fas fa-crown"></i> 1. The Maximum: "THE MOST"</div>
                        <div class="formula-bar">THE MOST + Noun</div>
                        <ul style="margin-top:10px; font-weight:500;">
                            <li>The iPhone has <strong>the most cameras</strong>. (Contable)</li>
                            <li>That drive offers <strong>the most storage</strong>. (Incontable)</li>
                        </ul>
                    </div>

                    <div class="info-box" style="margin-top:20px;">
                        <div class="info-title" style="color:var(--rc-navy);"><i class="fas fa-arrow-down"></i> 2. The Minimum: "FEWEST" vs "LEAST"</div>
                        <div class="split-grid">
                            <div class="split-card" style="border-color:var(--rc-blue);">
                                <h4 style="color:var(--rc-blue); margin-bottom:5px;">THE FEWEST (Contables)</h4>
                                <em>"He ate <strong>the fewest burgers</strong>."</em>
                            </div>
                            <div class="split-card" style="border-color:var(--c-amber);">
                                <h4 style="color:var(--c-amber); margin-bottom:5px;">THE LEAST (Incontables)</h4>
                                <em>"This app uses <strong>the least RAM</strong>."</em>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="sec-lab" class="view-section">
                <div class="glass-card">
                    <h1 class="hero-title">Syntax Builder Lab</h1>
                    <div class="hero-divider" style="background:var(--c-emerald);"></div>
                    <p class="master-text">Toca las palabras dispersas en el orden correcto para construir la oración. Optimizado para pantallas táctiles.</p>
                    
                    <div class="lab-header">
                        <div style="font-weight:600; color:var(--text-muted); text-transform:uppercase;">Exercise</div>
                        <div class="level-badge" id="game-lvl-display">Level 1 / 8</div>
                    </div>

                    <div class="game-area" id="game-container">
                        <div class="answer-area" id="answer-box"></div>
                        <div class="pool-area" id="word-pool"></div>
                        
                        <button class="btn-primary" id="btn-check-game" style="margin:0 auto; display:block;" onclick="checkGameState()">EVALUATE SYNTAX</button>
                        
                        <div class="teacher-feedback" id="game-feedback">
                            <div class="feedback-title"><i class="fas fa-check-circle"></i> Perfect!</div>
                            <div style="color:#047857; font-size:0.95rem;" id="feedback-desc">Explicación.</div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="sec-test" class="view-section">
                <div class="glass-card" id="test-intro-card">
                    <div style="text-align:center; padding:1rem 0;">
                        <i class="fas fa-shield-alt" style="font-size:4rem; color:var(--rc-blue); margin-bottom:1rem;"></i>
                        <h2 style="font-size:2.2rem; margin-bottom:1rem;">Certification Protocol</h2>
                        <p style="color:var(--text-muted); margin-bottom:2rem;">15 Reactivos. Modo contrarreloj de 5 Minutos.</p>
                        
                        <button class="btn-primary" onclick="initiateTest()">START EXAM NOW</button>
                    </div>
                </div>

                <div class="glass-card" id="test-engine-card" style="display:none; padding:2rem 1.5rem;">
                    <div class="exam-header-bar">
                        <div class="q-tracker">Q <span id="q-counter" style="color:var(--rc-blue);">1</span>/15</div>
                        <div class="timer-display" id="clock-display"><i class="fas fa-stopwatch"></i> 05:00</div>
                    </div>

                    <div class="question-text" id="question-render">Loading...</div>

                    <div class="options-container" id="options-render">
                        </div>

                    <button class="btn-primary" id="btn-next-q" onclick="evaluateAndNext()" disabled style="width:100%; max-width:100%;">LOCK ANSWER</button>
                </div>
            </section>

        </div> 
        
        <footer class="footer">
            <div style="font-family:'Outfit'; font-weight:800; font-size:1.1rem; color:var(--rc-navy);">RATORS CLUB</div>
            <p>Engineered for Grammar Mastery. &copy; 2026</p>
        </footer>
    </main>

    <div id="toast"><i class="fas fa-info-circle"></i> <span id="toast-msg">Mensaje</span></div>

    <div class="overlay" id="result-modal">
        <div class="result-card">
            <h2 style="font-size:2.2rem; font-family:'Outfit'; color:var(--rc-navy); margin-bottom:5px;">Final Results</h2>
            <p style="font-size:1.1rem; font-weight:600; color:var(--text-muted); margin-bottom:2rem; text-transform:uppercase;" id="modal-student-name">STUDENT</p>
            
            <div class="score-display" id="modal-score">100%</div>
            
            <p id="modal-feedback" style="font-size:1.05rem; color:var(--text-body); margin-bottom:2rem;">Resultado.</p>
            
            <button class="btn-primary" onclick="location.reload()" style="width:100%; max-width:100%;"><i class="fas fa-check"></i> FINISH</button>
        </div>
    </div>

    <script>
        let studentStr = "";

        function showToast(msg, type = 'default') {
            const toast = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            toast.style.background = type === 'error' ? 'var(--c-rose)' : 'var(--rc-navy)';
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3500);
        }

        function initSystem() {
            const input = document.getElementById('student-input').value.trim();
            if(input.length < 2) { showToast("Ingresa un nombre válido.", 'error'); return; }
            studentStr = input;
            
            document.getElementById('ui-name').innerText = studentStr.toUpperCase();
            document.getElementById('welcome-student-name').innerText = studentStr;
            document.getElementById('modal-student-name').innerText = studentStr.toUpperCase();

            document.getElementById('gateway').style.opacity = '0';
            setTimeout(() => document.getElementById('gateway').style.display = 'none', 400);
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
            document.getElementById('sidebarOverlay').classList.toggle('active');
        }

        function navTo(tabId, btnRef) {
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            btnRef.classList.add('active');

            document.querySelectorAll('.view-section').forEach(s => {
                s.classList.remove('active'); s.style.animation = 'none';
            });
            
            const target = document.getElementById(tabId);
            target.classList.add('active');
            void target.offsetWidth; 
            target.style.animation = 'slideUpFade 0.5s ease forwards';

            if(window.innerWidth <= 1024) toggleSidebar();
            window.scrollTo(0,0);
        }

        // --- SYNTAX BUILDER LAB ---
        const labData = [
            { w: ["My", "new", "laptop", "has", "fewer", "ports."], a: "My new laptop has fewer ports.", n: "Ports (Puertos) es contable plural. Usamos 'fewer'." },
            { w: ["This", "server", "requires", "less", "power."], a: "This server requires less power.", n: "Power (Energía) es incontable. Usamos 'less'." },
            { w: ["We", "should", "eat", "less", "fast", "food."], a: "We should eat less fast food.", n: "Food es incontable. Usamos 'less'." },
            { w: ["She", "bought", "the", "fewest", "apples."], a: "She bought the fewest apples.", n: "Apples es contable. El mínimo absoluto es 'the fewest'." },
            { w: ["This", "recipe", "uses", "the", "least", "salt."], a: "This recipe uses the least salt.", n: "Salt es incontable. El mínimo absoluto es 'the least'." },
            { w: ["Video", "editing", "needs", "more", "RAM."], a: "Video editing needs more RAM.", n: "'More' es el comodín para ambos universos." },
            { w: ["There", "are", "fewer", "calories", "here."], a: "There are fewer calories here.", n: "Calories es contable (lleva S). Usamos 'fewer'." },
            { w: ["Which", "phone", "has", "the", "most", "cameras?"], a: "Which phone has the most cameras?", n: "'The most' es el superlativo máximo universal." }
        ];

        let labLvl = 0;

        function loadLab() {
            if(labLvl >= labData.length) {
                document.getElementById('word-pool').innerHTML = `<h3 style="color:var(--c-emerald); width:100%;">¡Completado!</h3>`;
                document.getElementById('answer-box').innerHTML = '';
                document.getElementById('btn-check-game').style.display = 'none';
                return;
            }

            document.getElementById('game-lvl-display').innerText = `Level ${labLvl + 1}/${labData.length}`;
            document.getElementById('game-feedback').style.display = 'none';
            
            const btn = document.getElementById('btn-check-game');
            btn.innerText = "EVALUATE SYNTAX";
            btn.style.background = "linear-gradient(135deg, var(--rc-blue), var(--rc-cyan))";
            btn.onclick = checkGameState;

            const pool = document.getElementById('word-pool');
            const ans = document.getElementById('answer-box');
            pool.innerHTML = ''; ans.innerHTML = '';

            let arr = [...labData[labLvl].w].sort(() => Math.random() - 0.5);

            arr.forEach((word) => {
                let chip = document.createElement('div');
                chip.className = 'word-chip'; chip.innerText = word;
                chip.onclick = () => {
                    if(chip.parentElement === pool) ans.appendChild(chip);
                    else pool.appendChild(chip);
                };
                pool.appendChild(chip);
            });
        }

        function checkGameState() {
            const chips = Array.from(document.getElementById('answer-box').querySelectorAll('.word-chip'));
            const userStr = chips.map(c => c.innerText).join(' ');

            if(userStr === labData[labLvl].a) {
                document.getElementById('feedback-desc').innerText = labData[labLvl].n;
                document.getElementById('game-feedback').style.display = 'block';
                const btn = document.getElementById('btn-check-game');
                btn.innerText = "NEXT LEVEL";
                btn.style.background = "var(--c-emerald)";
                btn.onclick = () => { labLvl++; loadLab(); };
                confetti({ particleCount: 50, spread: 60, origin: { y: 0.7 } });
            } else {
                showToast("Sintaxis incorrecta. Revisa el orden.", "error");
            }
        }

        // --- EXAM PROTOCOL ---
        const examQs = [
            { q: "We need _____ bandwidth to stream 4K video.", o: ["fewer", "more", "the most"], a: 1 },
            { q: "This basic laptop has _____ RAM than the Pro version.", o: ["less", "fewer", "the least"], a: 0 },
            { q: "I ate _____ slices of pizza than my brother.", o: ["less", "fewer", "fewest"], a: 1 },
            { q: "Of all the recipes, this one uses _____ sugar.", o: ["fewer", "less", "the least"], a: 2 },
            { q: "Which phone has _____ battery life in the market?", o: ["the most", "more", "most"], a: 0 },
            { q: "You should drink _____ coffee if you want to sleep.", o: ["fewer", "the least", "less"], a: 2 },
            { q: "My old computer had _____ USB ports than this new one.", o: ["less", "fewer", "the fewest"], a: 1 },
            { q: "Out of the 3 servers, Server A crashed _____ times.", o: ["the least", "less", "the fewest"], a: 2 }, 
            { q: "This software requires _____ processing power to run.", o: ["less", "fewer", "least"], a: 0 },
            { q: "Who ate _____ burgers at the party? Only 1!", o: ["less", "the fewest", "the least"], a: 1 },
            { q: "I have _____ money today than I had yesterday.", o: ["less", "fewer", "the least"], a: 0 }, 
            { q: "We bought _____ tomatoes because they were expensive.", o: ["less", "fewer", "the fewest"], a: 1 },
            { q: "That gaming PC produces _____ heat of them all.", o: ["the fewest", "less", "the least"], a: 2 },
            { q: "She has _____ followers on social media than me.", o: ["less", "fewer", "fewest"], a: 1 },
            { q: "I want _____ ice in my soda, please.", o: ["fewer", "less", "the least"], a: 1 } 
        ];

        let testState = { idx: 0, score: 0, picked: null, locked: false };
        let clockInt; let timeRemaining = 300; 

        function initiateTest() {
            document.getElementById('test-intro-card').style.display = 'none';
            document.getElementById('test-engine-card').style.display = 'block';
            
            testState = { idx: 0, score: 0, picked: null, locked: false };
            timeRemaining = 300; updateClockUI();
            
            clockInt = setInterval(() => {
                timeRemaining--; updateClockUI();
                if(timeRemaining <= 0) { clearInterval(clockInt); endTest(); }
            }, 1000);

            renderTestQ();
        }

        function updateClockUI() {
            const m = Math.floor(timeRemaining / 60); const s = timeRemaining % 60;
            const disp = document.getElementById('clock-display');
            disp.innerHTML = `<i class="fas fa-stopwatch"></i> 0${m}:${s < 10 ? '0' : ''}${s}`;
            if(timeRemaining <= 60) disp.classList.add('danger');
            else disp.classList.remove('danger');
        }

        function renderTestQ() {
            const data = examQs[testState.idx];
            const btn = document.getElementById('btn-next-q');
            
            testState.locked = false; testState.picked = null;
            btn.disabled = true; btn.innerText = "LOCK ANSWER";
            btn.style.background = "var(--rc-cyan)"; btn.style.color = "white";

            document.getElementById('q-counter').innerText = testState.idx + 1;
            document.getElementById('question-render').innerText = `${testState.idx + 1}. ${data.q}`;

            const optsBox = document.getElementById('options-render');
            optsBox.innerHTML = '';
            data.o.forEach((optText, i) => {
                let optBtn = document.createElement('button');
                optBtn.className = 'opt-card'; optBtn.innerText = optText;
                optBtn.onclick = () => {
                    if(testState.locked) return;
                    document.querySelectorAll('.opt-card').forEach(b => b.classList.remove('selected'));
                    optBtn.classList.add('selected'); testState.picked = i; btn.disabled = false;
                };
                optsBox.appendChild(optBtn);
            });
        }

        function evaluateAndNext() {
            if(!testState.locked) {
                testState.locked = true;
                const data = examQs[testState.idx];
                const allOpts = document.querySelectorAll('.opt-card');
                
                if(testState.picked === data.a) {
                    testState.score++;
                    allOpts[testState.picked].style.background = "var(--c-emerald)";
                    allOpts[testState.picked].style.borderColor = "var(--c-emerald)";
                    allOpts[testState.picked].style.color = "white";
                } else {
                    allOpts[testState.picked].style.background = "var(--c-rose)";
                    allOpts[testState.picked].style.borderColor = "var(--c-rose)";
                    allOpts[testState.picked].style.color = "white";
                    allOpts[data.a].style.background = "var(--c-emerald)";
                    allOpts[data.a].style.color = "white";
                }

                const btn = document.getElementById('btn-next-q');
                btn.innerText = (testState.idx === examQs.length - 1) ? "VIEW RESULTS" : "NEXT QUESTION";
                btn.style.background = "var(--rc-navy)";
            } else {
                testState.idx++;
                if(testState.idx < examQs.length) renderTestQ(); else endTest();
            }
        }

        function endTest() {
            clearInterval(clockInt);
            const pct = Math.round((testState.score / examQs.length) * 100);
            const circle = document.getElementById('modal-score');
            const feedback = document.getElementById('modal-feedback');
            
            circle.innerText = `${pct}%`;

            if(pct >= 80) {
                circle.style.borderColor = "var(--c-emerald)"; circle.style.color = "var(--c-emerald)";
                feedback.innerHTML = `<strong>¡Excelente!</strong> Aprobaste con ${testState.score}/15. Buen dominio de sustantivos contables e incontables.`;
                confetti({ particleCount: 200, spread: 100 });
            } else {
                circle.style.borderColor = "var(--c-rose)"; circle.style.color = "var(--c-rose)";
                feedback.innerHTML = `Obtuviste ${testState.score}/15. Necesitas repasar la regla de FEWER vs LESS.`;
            }

            document.getElementById('result-modal').style.display = 'flex';
        }

        window.onload = loadLab;
    </script>
</body>
</html>
